{"version":3,"sources":["uni-app:///main.js","webpack:///E:/H盘/F盘/20240102桌面/chong-duomaomao/chong-duomaomao/pages/index/index.vue?cc76","webpack:///E:/H盘/F盘/20240102桌面/chong-duomaomao/chong-duomaomao/pages/index/index.vue?79c7","webpack:///E:/H盘/F盘/20240102桌面/chong-duomaomao/chong-duomaomao/pages/index/index.vue?582b","webpack:///E:/H盘/F盘/20240102桌面/chong-duomaomao/chong-duomaomao/pages/index/index.vue?056b","uni-app:///pages/index/index.vue","webpack:///E:/H盘/F盘/20240102桌面/chong-duomaomao/chong-duomaomao/pages/index/index.vue?2ca9","webpack:///E:/H盘/F盘/20240102桌面/chong-duomaomao/chong-duomaomao/pages/index/index.vue?95a4"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","customTop","chat","show","list","TentText","msg_id","scrollInto","endMsg","location_my","latitude","longitude","map_location","len","loadLocation","index","markers","markers_fencePanel","markers_user","polygons","mapContext","menuButtonInfo","resData","theme_id","qrcode","leaderboard","userList","risk","text","open","duration","theme_type","duration_user","value","values","effects","content","onPtInPoly","device_locationData","onLoad","uni","methods","Back","delta","Timer","that","console","setScroll","setTimeout","chat_sendout","type","message","uid","avatar","test","message_data","res","map_tap","sendMessages","title","editable","placeholderText","success","id","callback_scanCode","key","showCancel","confirmText","openCamera","cameraAuthorized","microphoneAuthorized","osName","url","onload_theme_info","Boolean","H5getLocation","onLocationChange","device_location","location","isPtInPoly","locationJson","horde_id","startLocationUpdateBackground","fail","startLocationUpdate","needFullAccuracy","moveLocation","markerId","destination","autoRotate","rotate","updated","checkUserCreate","second","middle","theTime","hour","result","distance","pam","method","markers_tmp","tmp_risk","pLon2","pLat2","iSum","createMarkersUser","iconPath","width","height","alpha","zIndex","nickname","messages","online","callout","color","display","borderRadius","padding","markerItem","creatPolygons","fillColor","strokeColor","strokeWidth","newArray","coordinateSort","acc","angle"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACoL;AACpL,gBAAgB,6LAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5EA;AAAA;AAAA;AAAA;AAA0qB,CAAgB,+rBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoP9rB;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;QACAC;QAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;MACAC;QAAA;QACAC;QACAC;MACA;MACAC;QAAA;QACAF;QACAC;QACAE;MACA;;MACAC;QACAD;QAAA;QACAE;MACA;;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA,CAEA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;QAAA;QACArB;MACA;MACAsB;QAAA;QACAtB;MACA;MACAuB;MAAA;MACAC;QACAA;QACAC;MACA;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;QAAA;QACAC;QACAC;MACA;MAAA;MACAC;QACAhC;QACAiC;MACA;MAAA;MACAC;QACAxB;MACA;;MACAyB;IACA;EACA;EAEAC;IACA;MACA;MACA;MACA;MAQA;;MAGA;MACAC;IAGA;EACA;EACAC;IACAC;MACA;MACAF;QACAG;MACA;IACA;IACAC;MACA;MACAC;MACAA;QACAA;QACA;QACA,4FACAA;UACAA;UACAC;QACA;UACAD;QACA;MACA;QACAC;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MAAA;MACA;MACA;MACAC;QAEAH;MACA;IAGA;IACA;IACAI;MACA;MAEAJ;QACAK;QACA3B;QACAa;MACA,GACA;QACA;QACAS;UACAvC;UAAA;UACA6C;UACAC;UAAA;UACAC;UAAA;UACAH;UAAA;UACAI;QACA;;QACAT;QACAA;MACA,GACA;QACAA;MACA;IACA;IACA;AACA;IACAU;MACA;MAEA;MACA;QAEAV,oBACAW,YACA;MACA;MACA;QAAA;QACAX;MACA;MACAA;MACA;MACA;QACA;UACAA;QACA;MACA;MACA;QACA;QACAA;MACA;MACA;QACA;MACA;MACAA;IACA;IACA;AACA;IACAY;MACAX;MACA;;MAEA;MACAA;IACA;IACA;AACA;IACAY;MACA;MACAlB;QACAmB;QACAvB;QACAwB;QACAC;QACAC;UACA;YACAhB;YACA;cACAD;gBACAK;gBACAa;gBACA3B;cACA,GACA,cAEA,GACA;YACA;UACA;YACAU;UACA;QACA;MACA;IACA;IACA;AACA;IACAkB;MACA;MACAlB;MACA;QAEAA;QACA;MACA;MACA;MACAD;QACAK;QACAa;QACAE;MACA,GACA;QACA;UACApB;UACAA;QACA;UACAL;YACAmB;YACAvB;YACA8B;YACAC;YACAL;cACA,kBAEA;YACA;UACA;QACA;MACA,GACA;QACA;UACAtB;YACAmB;YACAvB;YACA+B;YACAL;cACA;gBACA;cAAA;YAEA;UACA;QACA;MACA;IACA;IACA;AACA;IACAM;MAAA;MACA;MACA,4BAIA5B;QAHA6B;QACAC;QACAC;MAGA;QACA/B;UACAmB;UACAvB;UACA+B;UACAL;YACA;cACAtB;YACA;UACA;QACA;QACA;MACA;MACA;MACA;QACAA;UACAmB;UACAvB;UACA+B;UACAL;YACA;cACAtB;YACA;UACA;QACA;QACA;MACA;MACAA;QACAgC;MACA;IACA;IACA;AACA;IACAC;MACA;MACA;QACAvB;QACAa;MACA,GACA;QACA;UACA;UACAlB;UACAW;QAEA;QACAkB;QACA7B;QACA;QACAA;QAEAA;QACAA;QACAA;MAKA,GACA;IACA;IACA;AACA;AACA;IACA8B;IACA;IACAC;MACA;MACApC;QACA;QACA;QACAK;QACA;UAAA;UACAA;UACAA;QACA;;QAEA;QACAA;QACA;UACAA;UACAA;UACAA;QAIA;MACA;IACA;IACA;AACA;AACA;IACAgC;MACA;MAEA;QACA3B;QACA3B;QACAuD;QACAxE;QACAyE;MACA,GACA;QACA;QACA;QAEA;UACAC;UACA;YAEA;YACA;cACAnC,oFACAzC;cACA0C;YACA;cACA;cACA;gBACA;kBACAD;kBAEAA;kBAEAA;kBACAA;kBACA;kBACA;oBACAA;kBACA;kBACA;gBACA;cACA;cACA;cACA;gBACA;kBAEAA;kBACAA;kBACA;kBACA;oBACAA;kBACA;kBACA;gBACA;cACA;cAEAA;YAEA;UACA;QACA;QACAA;;QAEA;QACA;QACA;UACAkB;UACAlB;UACA;UACA;QACA;;QAEAA;QACAA;;QAEA;QACAA;QACAA;QAGAA;QACAA;QACA;UAAA;UACA;UACAL;UACAA;UACAK;UACAL;YACAmB;YACAvB;YACA8B;YACAJ;cACAhB;cACA;gBACAD;cACA;YACA;UACA;QACA;QACA;QACA,4FACAoC;UACApC;UACAA;QAEA;QACAA;MACA,GACA,gBAEA;IACA;IACA;IACAqC;MACA1C;QACAU;QAAA;QACAY;UACA;QAAA,CACA;QACAqB;UACA;QAAA;MAGA;IACA;IACA;IACAC;MACA5C;QACAU;QAAA;QACAmC;QAAA;QACAvB;UACA;QAAA,CACA;QACAqB;UACA;QAAA;MAGA;IACA;IACA;IACAG;MACA;MACA;QACAC;QACAC;UACA9E;UACAC;QACA;QAAA;QACA8E;QAAA;QACAC;QAAA;QACAP;UACA;QAAA,CACA;QACArB;UACA;QAAA;MAEA;IACA;IAEA6B;MACA;IAEA;IACA;AACA;IACAC;MACA;MACA;QACA;UACA;QACA;MACA;MACA;IACA;IAEA;AACA;IACAC;MAEA;MACA;MACA;;MAEA;QACAC;QACAC;QACA;UACAC;UACAF;QACA;MACA;MACA;MACAG;;MAEA;QACAH;QACAA;QACAG;MAEA;QACAA;MACA;MACA;QACAD;QACAA;QACAC;MACA;QACAA;MACA;MACA;IACA;IACA;AACA;IACAC;MACA;;MAEA;MACA;MACA;MACA;MACAC;MACA;QAEAA;QACA;UACAA;QACA;MAEA;MACA;MACAA;MACAA;MACAA;MAGA;MACA;;MAGA3D;QACAgC;QACA4B;QACAtC;UACA;UACA;YACA;YACA;UACA;UACA;UACA;UACA;UACA;YACA;cAAA;cACAuC;cAEAA,2CACAA;;cAEA;cACA;gBACAC;cACA;YAEA;cAEAD;YACA;UACA;UAEAxD;UAEAA;QACA;MACA;IACA;IAEA;AACA;IAEAkC;MACA;AACA;AACA;AACA;AACA;MACA;MACA;MAEA;QACAjC;QACA;MACA;MACAA;MACA;QACA;QACA;QACA;UACAyD;QACA;UACAC;UACAD;QACA;UACAC;UACAD;QACA;QACA;UACA;YACA;YACA;cACAE;YACA;UACA;QACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;AACA;IACAC;MACA5D;MACA;MACA;MACA;MACA;QACAiB;QACArD;QACAC;QACAgG;QACAC;QACAC;QACAnB;QACAoB;QACAC;QACAb;QAAA;QACAc;QAAA;QACAC;QAAA;QACAhC;QACAiC;QAAA;QACAC;UACAC;UACAhF;UACAiF;UAAA;UACAC;UACAC;QACA;MACA;MACAC;MACAA;MACAnB;MACA;MACA;IAEA;IACA;IACAoB;MACA;QACA;MACA;MACA;MACA;MACA;MACA;QACAC;QACAC;QACAC;QACAb;MACA;MACA;QACA;UACArG;UACAC;QACA;QACAkH;MACA;MACA1G;MACAA;MACA0G;MACA;MACA;IACA;IAGA;IACAC;MACA,gDAGA;QAAA,IAFApH;UACAC;QAEAoH;QACAA;QACA;MACA;QACArH;QACAC;MACA;MACA;MACA,yCAGA;QAAA,IAFAD;UACAC;QAEA;UACAD;UACAC;UACAqH;QACA;MACA;MACA;MACA;QAAA;MAAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5gCA;AAAA;AAAA;AAAA;AAAyyC,CAAgB,swCAAG,EAAC,C;;;;;;;;;;;ACA7zC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniTable: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-table/uni-table\" */ \"@/uni_modules/uni-table/components/uni-table/uni-table.vue\"\n      )\n    },\n    uniTr: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-tr/uni-tr\" */ \"@/uni_modules/uni-table/components/uni-tr/uni-tr.vue\"\n      )\n    },\n    uniTd: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-td/uni-td\" */ \"@/uni_modules/uni-table/components/uni-td/uni-td.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      ;(_vm.leaderboard.show = false),\n        (_vm.qrcode.show = false),\n        (_vm.chat.show = false)\n    }\n    _vm.e1 = function ($event) {\n      _vm.chat.show = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.effects.show = false\n    }\n    _vm.e3 = function ($event) {\n      _vm.qrcode.show = true\n    }\n    _vm.e4 = function ($event) {\n      _vm.leaderboard.show = true\n    }\n    _vm.e5 = function ($event) {\n      return _vm.$common.goto(\"/pages/camera\")\n    }\n    _vm.e6 = function ($event) {\n      _vm.chat.show = true\n    }\n    _vm.e7 = function ($event) {\n      _vm.chat.show = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<!-- 猫和老鼠活动主页 -->\r\n<template>\r\n\t<view>\r\n\t\t<!-- 蒙层 -->\r\n\t\t<view class=\"mask\" v-show=\"leaderboard.show==true||qrcode.show==true \"\r\n\t\t\t@click=\"leaderboard.show=false,qrcode.show=false,chat.show=false\"></view>\r\n\r\n\r\n\r\n\t\t<view class=\"box\">\r\n\t\t\t<map style=\"width: 100%; height: calc(100% - 9.5em);\" class=\"\"\r\n\t\t\t\tv-show=\"resData.config && location_my.latitude>0\" :polygons=\"polygons\" :markers=\"markers\"\r\n\t\t\t\t:latitude=\"map_location.latitude\" :longitude=\"map_location.longitude\" :enable-rotate=\"true\"\r\n\t\t\t\t:enable-building=\"true\" @tap=\"map_tap\" id=\"map\">\r\n\r\n\t\t\t\t<!-- <view class=\"active-num\">\r\n\t\t\t\t\t<view class=\"active-num-on\">\r\n\t\t\t\t\t\t1在线\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"active-num-now\">\r\n\t\t\t\t\t\t当前活动2\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"active-num-out\">\r\n\t\t\t\t\t\t1离线\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>-->\r\n\r\n\t\t\t\t<!-- 闪烁屏幕警报 -->\r\n\t\t\t\t<view v-if=\"risk.risk\" class=\"ptInPoly\">{{risk.text}}</view>\r\n\t\t\t\t<view class=\"bcak\" @click=\"Back\" :style=\"{'top': customTop + 'px'}\">\r\n\t\t\t\t\t<uni-icons type=\"back\" size=\"26\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 离开安全区 -->\r\n\t\t\t\t<view v-if=\"onPtInPoly.len>0\" class=\"ptInPoly\">已离开活动区域，请返回。否则将会淘汰</view>\r\n\r\n\t\t\t\t<!-- 公屏消息 -->\r\n\t\t\t\t<view v-if=\"chat.endMsg!='' && chat.show==false\" class=\"global-msg\" @click=\"chat.show=true\">\r\n\t\t\t\t\t<image src=\"/static/img/trumpet.png\" style=\"width: 20px;height: 20px;margin: auto 5px;\"></image>\r\n\t\t\t\t\t{{chat.endMsg}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 排行榜 -->\r\n\t\t\t\t<view class=\"leaderboard\" v-if=\"leaderboard.show\">\r\n\t\t\t\t\t<uni-table :border=\"false\" stripe emptyText=\"暂无更多数据\">\r\n\t\t\t\t\t\t<!-- 表格数据行 -->\r\n\t\t\t\t\t\t<uni-tr v-for=\"(item,index) in userList\" :key=\"index\">\r\n\t\t\t\t\t\t\t<uni-td v-if=\"index==0\" width=\"30\">\r\n\t\t\t\t\t\t\t\t<image src=\"/static/img/list-top1.png\" class=\"top\"></image>\r\n\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t<uni-td v-if=\"index==1\" width=\"30\">\r\n\t\t\t\t\t\t\t\t<image src=\"/static/img/list-top2.png\" class=\"top\"></image>\r\n\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t<uni-td v-if=\"index==2\" width=\"30\">\r\n\t\t\t\t\t\t\t\t<image src=\"/static/img/list-top3.png\" class=\"top\"></image>\r\n\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t<uni-td v-if=\"index>2\">{{index+1}}</uni-td>\r\n\t\t\t\t\t\t\t<uni-td>\r\n\t\t\t\t\t\t\t\t<image :src=\"item.avatar\" class=\"image\"></image>\r\n\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t<uni-td class=\"name\">{{item.nickname}}</uni-td>\r\n\t\t\t\t\t\t\t<uni-td class=\"rank\">{{item.hunting_count}}</uni-td>\r\n\t\t\t\t\t\t</uni-tr>\r\n\t\t\t\t\t</uni-table>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 捕猎后的特效 -->\r\n\t\t\t\t<view class=\"effects\" v-show=\"effects.show\" @click=\"effects.show=false\">\r\n\t\t\t\t\t<image v-if=\"resData.img\" :src=\"resData.img.bulie\"></image>\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t恭喜您\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t恭喜您发现一只{{effects.content}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</map>\r\n\t\t\t<!-- 底部操作 -->\r\n\t\t\t<!-- 逃跑闪烁优先级要比危险接近等级高，因为还处于逃跑时间的话也是处于保护期的 -->\r\n\t\t\t<view class=\"active-box\"\r\n\t\t\t\t:class=\"resData.user &&  duration_user.value>0 ? 'duration_user': risk.risk==true ? 'risk':''\">\r\n\t\t\t\t<!-- 红蓝双方 -->\r\n\t\t\t\t<view class=\"camp\">\r\n\t\t\t\t\t<view v-for=\"(item,index) in resData.horde\" :key=\"index\" style=\"display: flex;\">\r\n\t\t\t\t\t\t<view v-if=\"index==1\" class=\"text\">{{item.count}}</view>\r\n\t\t\t\t\t\t<image class=\"ico\" :src=\"item.horde_ico\"></image>\r\n\t\t\t\t\t\t<view v-if=\"index==0\" class=\"text\">{{item.count}}:</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t我的角色：鼠（普通身份）\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"bottom-box\">\r\n\t\t\t\t\t<!-- <view class=\"qr-box\" >\r\n\t\t\t\t\t\t<image class=\"qrcode\" mode=\"widthFix\" src=\"/static/img/messages.png\"></image>\r\n\t\t\t\t\t\t<view class=\"text\">消息</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"qr-box\" >\r\n\t\t\t\t\t\t<image class=\"qrcode\" mode=\"widthFix\" src=\"/static/img/message.png\"></image>\r\n\t\t\t\t\t\t<view class=\"text\">状态</view>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t\t<view class=\"qr-box\" @click=\"qrcode.show=true\">\r\n\t\t\t\t\t\t<image class=\"qrcode\" mode=\"widthFix\" src=\"/static/img/qrcode-1.png\"></image>\r\n\t\t\t\t\t\t<view class=\"text\">牌子</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"qr-box\" @click=\"leaderboard.show=true\">\r\n\t\t\t\t\t\t<image class=\"qrcode\" src=\"/static/img/list-1.png\"></image>\r\n\t\t\t\t\t\t<view class=\"text\">排行</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"qr-box\" @click=\"$common.goto('/pages/camera')\">\r\n\t\t\t\t\t\t<image class=\"qrcode\" src=\"/static/img/richScan-1.png\"></image>\r\n\t\t\t\t\t\t<view class=\"text\">捕获</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"active-box-bottom\">\r\n\t\t\t\t\t<view class=\"active-box-btn\">\r\n\t\t\t\t\t\t结束游戏\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 闪烁屏幕逃跑 -->\r\n\t\t\t\t\t<view class=\"active-box-time\" v-if=\"duration!=''\">\r\n\t\t\t\t\t\t<view class=\"active-box-time-top\">\r\n\t\t\t\t\t\t\t{{duration}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"active-box-time-bottom\">\r\n\t\t\t\t\t\t\t倒计时\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<!-- 弹出二维码 -->\r\n\t\t\t<image v-if=\"qrcode.show && resData.qrcode\" class=\"qr-img\" :src=\"resData.qrcode\"></image>\r\n\t\t\t<!-- 弹出二维码 -->\r\n\t\t\t<view class=\"right-box\">\r\n\t\t\t\t<view class=\"right-box-item\" @click=\"sendMessages\">\r\n\t\t\t\t\t<image class=\"right-box-item-icon\" src=\"/static/img/message.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"right-box-item-title\">\r\n\t\t\t\t\t\t状态\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right-box-item\">\r\n\t\t\t\t\t<image class=\"right-box-item-icon\" src=\"/static/img/messages.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"right-box-item-title\">\r\n\t\t\t\t\t\t通知\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right-box-item\">\r\n\t\t\t\t\t<image class=\"right-box-item-icon\" src=\"../../static/img/muyu.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"right-box-item-title\">\r\n\t\t\t\t\t\t控制台\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right-box-item\">\r\n\t\t\t\t\t<image class=\"right-box-item-icon\" src=\"../../static/img/muyu.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"right-box-item-title\">\r\n\t\t\t\t\t\t排行榜\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right-box-item\">\r\n\t\t\t\t\t<image class=\"right-box-item-icon\" src=\"../../static/img/muyu.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"right-box-item-title\">\r\n\t\t\t\t\t\t刷新\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right-box-item\">\r\n\t\t\t\t\t<image class=\"right-box-item-icon\" src=\"../../static/img/muyu.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"right-box-item-title\">\r\n\t\t\t\t\t\t活动规则\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right-box-item\" @click=\"chat.show=true\">\r\n\t\t\t\t\t<image class=\"right-box-item-icon\" src=\"/static/img/messages.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"right-box-item-title\">\r\n\t\t\t\t\t\t聊天室\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 聊天蒙层 --><!-- 关闭此弹窗 -->\r\n\t\t<view style=\"width: 100%;height: 100%;position: absolute;background-color: #0000;\" v-show=\"chat.show\"\r\n\t\t\t@click=\"chat.show=false\"></view>\r\n\t\t<view v-if=\"chat.show\" class=\"chat\">\r\n\r\n\r\n\t\t\t<view style=\"height:100%;width:100%;display: flex;\">\r\n\t\t\t\t<scroll-view class=\"content\" scroll-y=\"true\" :scroll-into-view=\"chat.scrollInto\">\r\n\t\t\t\t\t<view class=\"pop__clearfix\" v-for=\"(item,index) in chat.list\" :key=\"index\" :id=\"'s'+item.msg_id\">\r\n\t\t\t\t\t\t<!-- 自己 -->\r\n\t\t\t\t\t\t<view class=\"pop__chat-msg-me li\" v-if=\"item.type==0\">\r\n\t\t\t\t\t\t\t<view class=\"pop__chat-msg-msg\" v-if=\"item.message\"><span>{{item.message}}</span></view>\r\n\t\t\t\t\t\t\t<view class=\"pop__chat-msg-avatar\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.avatar\"></image>\r\n\t\t\t\t\t\t\t\t<!-- <img src=\"xxx.jpg\" large=\"xxx_3x.jpg\" preview=\"2\" preview-text=\"描述文字\"> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 好友 -->\r\n\t\t\t\t\t\t<view class=\"pop__chat-msg-me2 li\" v-if=\"item.type==1\">\r\n\t\t\t\t\t\t\t<view class=\"pop__chat-msg-avatar\"\r\n\t\t\t\t\t\t\t\t:style=\"item.user_id==0 ? 'height:30px;width:30px;margin-right: 30px;':''\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.avatar\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"pop__chat-msg-msg2\" v-if=\"item.message\">\r\n\t\t\t\t\t\t\t\t<view class=\"nickname\">{{item.nickname}}</view>\r\n\t\t\t\t\t\t\t\t<span>{{item.message}}</span>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 显示最近一次的聊天时间 -->\r\n\t\t\t\t\t\t<view class=\"time li\" v-if=\"item.id==0\">{{item.time}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view class=\"Bottom\">\r\n\t\t\t\t\t<view class=\"state\">\r\n\t\t\t\t\t\t<!-- 语音切换 -->\r\n\t\t\t\t\t\t<!-- <button class=\"voice\" @click='voice'>\r\n\t\t\t\t\t\t\t<img :src=\"Texts?'../Image/y.png':'../Image/j.png'\" alt=\"\">\r\n\t\t\t\t\t\t</button> -->\r\n\t\t\t\t\t\t<!-- 输入框 -->\r\n\t\t\t\t\t\t<textarea id=\"t\" autofocus ref=\"myInput\" v-model=\"chat.TentText\" cursor-spacing=\"100\"\r\n\t\t\t\t\t\t\tplaceholder=\"和大家吹吹牛皮...\"></textarea>\r\n\t\t\t\t\t\t<!-- 点击录音 -->\r\n\t\t\t\t\t\t<!-- <button class=\"Press\" v-if=\"Press\">按住 说话</button> -->\r\n\t\t\t\t\t\t<!-- 表情 -->\r\n\t\t\t\t\t\t<!-- <view class=\"expression but\" @click=\"chat_expression\">\r\n\t\t\t\t\t\t\t<image :src=\"chat.expsion.show?'/static/img/chat/j.png':'/static/img/chat/b.png'\"  ></image>\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t<!-- 发送图片 -->\r\n\t\t\t\t\t\t<!-- <view class=\"file but\" @click=\"file\" v-if=\"chat.TentText?false:true\"></view> -->\r\n\t\t\t\t\t\t<!-- capture=\"camera\" 相机拍照 -->\r\n\t\t\t\t\t\t<input type=\"file\" style=\"display: none;\" accept=\"image/*\" multiple id=\"p\" name=\"file\"\r\n\t\t\t\t\t\t\t@change=\"onChooseImage($event)\" />\r\n\t\t\t\t\t\t<!-- 发送文字内容 -->\r\n\t\t\t\t\t\t<view class=\"sendout but\" @click=\"chat_sendout\">发送</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"express\" v-if=\"chat.expsion.show\">\r\n\t\t\t\t\t\t<view style=\"font-size: 24px; padding: 0.1rem 0.12rem; \" @click=\"copy(item,index)\"\r\n\t\t\t\t\t\t\tv-for=\"(item,index) in chat.expsion.emolis\" :key=\"index\">{{item.char}}</view>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n<script>\r\n\t// #ifdef MP-WEIXIN\r\n\tconst custom = wx.getMenuButtonBoundingClientRect()\r\n\t// #endif\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcustomTop: custom?.top || 0,\r\n\t\t\t\tchat: {\r\n\t\t\t\t\tshow: false, //是否显示聊天面板\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \tmsg_id: 1,//消息ID\r\n\t\t\t\t\t// \tcontent: '山不在高，有仙则名。' ,\r\n\t\t\t\t\t// \tuid:1,//用户ID\r\n\t\t\t\t\t// \tavatar:'',//用户头像\r\n\t\t\t\t\t// \ttype:1,//区分自己和对方；0=对方 1=自己\r\n\t\t\t\t\t//  },\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tTentText: '', //欲发送的内容\r\n\t\t\t\t\tmsg_id: 0, //消息id\r\n\t\t\t\t\tscrollInto: '', //滚动至的id\r\n\t\t\t\t\tendMsg: ''\r\n\t\t\t\t},\r\n\t\t\t\tlocation_my: { //我的位置\r\n\t\t\t\t\tlatitude: 0,\r\n\t\t\t\t\tlongitude: 0,\r\n\t\t\t\t},\r\n\t\t\t\tmap_location: { //作为地图中间的坐标点，触摸地图的一分钟后移动到当前坐标点\r\n\t\t\t\t\tlatitude: 0,\r\n\t\t\t\t\tlongitude: 0,\r\n\t\t\t\t\tlen: 0, //计次\r\n\t\t\t\t},\r\n\t\t\t\tloadLocation: {\r\n\t\t\t\t\tlen: 2, //实时更新了多少次后上传当前位置至后台\r\n\t\t\t\t\tindex: 0, //当前次数\r\n\t\t\t\t},\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\tmarkers_fencePanel: [], //标记的围栏\r\n\t\t\t\tmarkers_user: [], //用户的标记点\r\n\t\t\t\tpolygons: [],\r\n\t\t\t\tmapContext: { //创建并返回 map 上下文 mapContext 对象\r\n\r\n\t\t\t\t},\r\n\t\t\t\tmenuButtonInfo: {}, //胶囊位置\r\n\t\t\t\tresData: {}, //返回的活动数据\r\n\t\t\t\ttheme_id: '', //活动ID,由上一个页面传递\r\n\t\t\t\tqrcode: { //是否展示二维码位置\r\n\t\t\t\t\tshow: false\r\n\t\t\t\t},\r\n\t\t\t\tleaderboard: { //是否展示排行榜\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t\tuserList: [], //参与用户列表\r\n\t\t\t\trisk: {\r\n\t\t\t\t\trisk: false,\r\n\t\t\t\t\ttext: '附近100米有可疑敌情~',\r\n\t\t\t\t}, //距离过近警报\r\n\t\t\t\topen: '开发者WX：majiaoshou2023',\r\n\t\t\t\tduration: '', //倒计时\r\n\t\t\t\ttheme_type: 2, //活动状态\r\n\t\t\t\tduration_user: { //游戏开始后的逃跑时间\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\tvalues: ''\r\n\t\t\t\t}, //\r\n\t\t\t\teffects: {\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}, //捕猎后的特效\r\n\t\t\t\tonPtInPoly: {\r\n\t\t\t\t\tlen: 0, //越界的秒数\r\n\t\t\t\t},\r\n\t\t\t\tdevice_locationData: {}, //每一次上传定位返回的数据将缓存在这里\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonLoad(res) {\r\n\t\t\tif (res.theme_id) {\r\n\t\t\t\tthis.theme_id = res.theme_id;\r\n\t\t\t\tthis.onload_theme_info()\r\n\t\t\t\tthis.mapContext = uni.createMapContext('map', this);\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.menuButtonInfo.height = 25\r\n\t\t\t\tthis.menuButtonInfo.top = 10\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tthis.menuButtonInfo = uni.getMenuButtonBoundingClientRect()\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t//监控扫码事件回调\r\n\t\t\t\tuni.$on('scanCode', this.callback_scanCode)\r\n\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tBack() {\r\n\t\t\t\t//uni.navigateBack()//默认delta:1\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1, //返回层数，2则上上页\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tTimer() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthat.device_location()\r\n\t\t\t\tthat.$common.recordingTimer(true, () => {\r\n\t\t\t\t\tthat.device_location()\r\n\t\t\t\t\t//记录离开活动范围数据\r\n\t\t\t\t\tif (that.resData.polygons.polygons.length > 0 && that.isPtInPoly(that.location_my.latitude,\r\n\t\t\t\t\t\t\tthat.location_my.longitude, that.resData.polygons.polygons) == false) {\r\n\t\t\t\t\t\tthat.onPtInPoly.len++;\r\n\t\t\t\t\t\tconsole.log(\"你已离开活动区域：\" + (that.onPtInPoly.len * 5) + \"秒了\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.onPtInPoly.len = 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}, -1, () => {\r\n\t\t\t\t\tconsole.log(\"定时器停止\")\r\n\t\t\t\t}, parseInt(that.resData.config.uploadDeviceTimer.value))\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 自动滚动到底部最新的消息位置\r\n\t\t\t * @param {string} id :消息的唯一ID 可空(则滚动到消息列表的最后一条)\r\n\t\t\t * */\r\n\t\t\tsetScroll(id = '') {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tlet len = 0;\r\n\t\t\t\tsetTimeout(() => {\r\n\r\n\t\t\t\t\tthat.chat.scrollInto = 's' + id;\r\n\t\t\t\t}, 100)\r\n\r\n\r\n\t\t\t},\r\n\t\t\t// 发送\r\n\t\t\tchat_sendout() {\r\n\t\t\t\tvar that = this\r\n\r\n\t\t\t\tthat.$common.get_request({\r\n\t\t\t\t\t\ttype: 'send_message',\r\n\t\t\t\t\t\ttheme_id: that.theme_id,\r\n\t\t\t\t\t\tcontent: that.chat.TentText,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tvar msg_id = that.chat.list.length\r\n\t\t\t\t\t\tthat.chat.list.push({\r\n\t\t\t\t\t\t\tmsg_id: msg_id, //消息ID\r\n\t\t\t\t\t\t\tmessage: that.chat.TentText,\r\n\t\t\t\t\t\t\tuid: that.resData.user.id, //用户ID\r\n\t\t\t\t\t\t\tavatar: that.resData.user.avatar, //用户头像\r\n\t\t\t\t\t\t\ttype: 0, //区分自己和对方；0=自己 1=对方 \r\n\t\t\t\t\t\t\ttest: true, //临时的\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.chat.TentText = '';\r\n\t\t\t\t\t\tthat.setScroll(msg_id)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\tthat.chat.TentText = '';\r\n\t\t\t\t\t}, false)\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 处理消息记录， */\r\n\t\t\tmessage_data(res) {\r\n\t\t\t\tvar that = this\r\n\r\n\t\t\t\tvar count = res.list.length;\r\n\t\t\t\tfor (var i = 0; i < count; i++) {\r\n\r\n\t\t\t\t\tthat.chat.list.push(\r\n\t\t\t\t\t\tres.list[i]\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tif (count > 0) { //缓存最后的一条信息用户展示公屏\r\n\t\t\t\t\tthat.chat.endMsg = res.list[count - 1].nickname + ': ' + res.list[count - 1].message\r\n\t\t\t\t}\r\n\t\t\t\tthat.chat.msg_id = res.msg_id\r\n\t\t\t\t//删除用户发送的消息，因为发送成功的话服务器会返回刚刚所发的信息\r\n\t\t\t\tfor (var i = 0; i < that.chat.list.length; i++) {\r\n\t\t\t\t\tif (that.chat.list[i].test) {\r\n\t\t\t\t\t\tthat.chat.list.splice(i, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (that.chat.list.length - 80 > 0) {\r\n\t\t\t\t\t//删除超过80 条的消息，保存流畅\r\n\t\t\t\t\tthat.chat.list.splice(0, that.chat.list.length - 80)\r\n\t\t\t\t}\r\n\t\t\t\tif (that.chat.show == false) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthat.setScroll(that.chat.msg_id)\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 更新打断将地图中心点移动到屏幕中间， */\r\n\t\t\tmap_tap(e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\t//detail: {latitude: 21.917840468162645, longitude: 110.8549736925047}\r\n\r\n\t\t\t\tthis.map_location.len = 0\r\n\t\t\t\tconsole.log('更新打断将地图中心点移动到屏幕中间')\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 发送状态消息文本 */\r\n\t\t\tsendMessages() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '修改个人位置上方的状态',\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\teditable: true,\r\n\t\t\t\t\tplaceholderText: '来呀~抓我呀',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tconsole.log('用户点击确定');\r\n\t\t\t\t\t\t\tif (res.content) {\r\n\t\t\t\t\t\t\t\tthat.$common.get_request({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'update_messages',\r\n\t\t\t\t\t\t\t\t\t\tid: that.theme_id,\r\n\t\t\t\t\t\t\t\t\t\tcontent: res.content,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfunction(e) {\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfunction() {})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 扫码事件回调 */\r\n\t\t\tcallback_scanCode(res) {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tconsole.log('callback_scanCode', res)\r\n\t\t\t\tif (res.value == undefined) {\r\n\r\n\t\t\t\t\tconsole.log('扫码出错')\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar tmp = res.value;\r\n\t\t\t\tthat.$common.get_request({\r\n\t\t\t\t\t\ttype: 'hunting',\r\n\t\t\t\t\t\tid: that.theme_id,\r\n\t\t\t\t\t\tkey: tmp,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(e) {\r\n\t\t\t\t\t\tif (e.effects.type == true) {\r\n\t\t\t\t\t\t\tthat.effects.show = true\r\n\t\t\t\t\t\t\tthat.effects.content = e.effects.name\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '成功捕猎',\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(e) {\r\n\t\t\t\t\t\tif (e && e.msg) {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: e.msg,\r\n\t\t\t\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t//uni.openAppAuthorizeSetting()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, true)\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 打开扫码 */\r\n\t\t\topenCamera(mode = 'scanCode') {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcameraAuthorized,\r\n\t\t\t\t\tmicrophoneAuthorized,\r\n\t\t\t\t\tosName\r\n\t\t\t\t} = uni.getSystemInfoSync()\r\n\r\n\t\t\t\tif (!cameraAuthorized) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '您关闭了摄像头权限，请允许微信使用摄像头权限',\r\n\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.openAppAuthorizeSetting()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// ios 摄像头&麦克风绑定\r\n\t\t\t\tif (!microphoneAuthorized && osName === 'ios') {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '您关闭了麦克风权限，请允许微信使用麦克风权限',\r\n\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.openAppAuthorizeSetting()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/camera?mode=${mode}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 加载活动详情 */\r\n\t\t\tonload_theme_info() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.$common.get_request({\r\n\t\t\t\t\t\ttype: 'theme_info',\r\n\t\t\t\t\t\tid: that.theme_id,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tif (res.polygons.polygons.length > 0) {\r\n\t\t\t\t\t\t\tvar t_polygons = JSON.parse(res.polygons.polygons)\r\n\t\t\t\t\t\t\tthat.creatPolygons(t_polygons) //绘制活动范围\r\n\t\t\t\t\t\t\tres.polygons.polygons = t_polygons\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tBoolean\r\n\t\t\t\t\t\tthat.resData = res;\r\n\t\t\t\t\t\t//that.resData.config.showLocationIco.value = Boolean(that.resData.config.showLocationIco.value);\r\n\t\t\t\t\t\tthat.Timer()\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tthat.startLocationUpdateBackground()\r\n\t\t\t\t\t\tthat.startLocationUpdate()\r\n\t\t\t\t\t\tthat.onLocationChange()\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t//that.H5getLocation()\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {}, false)\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取当前所在地理位置，调用一次即重新定位一次，定位数据比较精确。，\r\n\t\t\t *  */\r\n\t\t\tH5getLocation() {},\r\n\t\t\t//监听实时地理位置变化事件，需结合 uni.startLocationUpdate 或 uni.startLocationUpdateBackground 使用。\r\n\t\t\tonLocationChange() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.onLocationChange(function(res) {\r\n\t\t\t\t\t//console.log(\"onLocationChange:\",res)\r\n\t\t\t\t\t// 赋值当前位置至地图组件\r\n\t\t\t\t\tthat.location_my = res\r\n\t\t\t\t\tif (that.map_location.latitude == 0) { //首次打开地图的时候需要赋值一个经纬度，否则地图不刷新\r\n\t\t\t\t\t\tthat.map_location.latitude = res.latitude\r\n\t\t\t\t\t\tthat.map_location.longitude = res.longitude\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//开始记录当前的次数，手指不触摸地图的一分钟后将地图中间移动到当前的坐标点\r\n\t\t\t\t\tthat.map_location.len++;\r\n\t\t\t\t\tif (that.map_location.len >= 30) {\r\n\t\t\t\t\t\tthat.map_location.latitude = res.latitude\r\n\t\t\t\t\t\tthat.map_location.longitude = res.longitude\r\n\t\t\t\t\t\tthat.loadLocation.len = 0;\r\n\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 位置信息上传\r\n\t\t\t * */\r\n\t\t\tdevice_location() {\r\n\t\t\t\tvar that = this\r\n\r\n\t\t\t\tthis.$common.get_request({\r\n\t\t\t\t\t\ttype: 'device_location',\r\n\t\t\t\t\t\ttheme_id: that.theme_id,\r\n\t\t\t\t\t\tlocation: JSON.stringify(that.location_my),\r\n\t\t\t\t\t\tmsg_id: that.chat.msg_id,\r\n\t\t\t\t\t\tisPtInPoly: that.onPtInPoly.len > 60 ? 1 : 2, //如果用户离开活动范围5分钟将默认淘汰\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\t//更新所有的用户标记点\r\n\t\t\t\t\t\tvar locationJson = null;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < res.list.length; i++) {\r\n\t\t\t\t\t\t\tlocationJson = JSON.parse(res.list[i].location);\r\n\t\t\t\t\t\t\tif (null != locationJson) {\r\n\r\n\t\t\t\t\t\t\t\t//查询次用户是否已被创建，未创建则创建，否则移动位置\r\n\t\t\t\t\t\t\t\tif (that.checkUserCreate(res.list[i].user_id) == false) {\r\n\t\t\t\t\t\t\t\t\tthat.createMarkersUser(locationJson, res.list[i].user_id, res.list[i].nickname, res\r\n\t\t\t\t\t\t\t\t\t\t.list[i].avatar, res.list[i].horde_id)\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"创建用户标记\")\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t//更新标记点数组里面的经纬度信息，否则会来回跳动坐标\r\n\t\t\t\t\t\t\t\t\tfor (var ii = 0; ii < that.markers_user.length; ii++) {\r\n\t\t\t\t\t\t\t\t\t\tif (that.markers_user[ii].id == res.list[i].user_id) {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.markers_user[ii].online = res.list[i].online == 1 ? '离线' : ''\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tthat.markers_user[ii].messages = res.list[i].messages\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tthat.markers_user[ii].latitude = locationJson.latitude //服务器下发的经纬度信息\r\n\t\t\t\t\t\t\t\t\t\t\tthat.markers_user[ii].longitude = locationJson.longitude //服务器下发的经纬度信息\r\n\t\t\t\t\t\t\t\t\t\t\t//改变阵营头像\r\n\t\t\t\t\t\t\t\t\t\t\tif (that.markers[ii].horde_id != res.list[i].horde_id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.markers[ii].iconPath = res.list[i].avatar\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t//更新标记点数组里面的经纬度信息，否则会来回跳动坐标\r\n\t\t\t\t\t\t\t\t\tfor (var ii = 0; ii < that.markers.length; ii++) {\r\n\t\t\t\t\t\t\t\t\t\tif (that.markers[ii].id == res.list[i].user_id) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tthat.markers[ii].latitude = locationJson.latitude //服务器下发的经纬度信息\r\n\t\t\t\t\t\t\t\t\t\t\tthat.markers[ii].longitude = locationJson.longitude //服务器下发的经纬度信息\r\n\t\t\t\t\t\t\t\t\t\t\t//改变阵营头像\r\n\t\t\t\t\t\t\t\t\t\t\tif (that.markers[ii].horde_id != res.list[i].horde_id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.markers[ii].iconPath = res.list[i].avatar\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tthat.moveLocation(res.list[i].user_id, locationJson);\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.message_data(res.messages)\r\n\r\n\t\t\t\t\t\t//更新阵营用户量\r\n\t\t\t\t\t\tvar id = ''\r\n\t\t\t\t\t\tfor (var i = 0; i < that.resData.horde.length; i++) {\r\n\t\t\t\t\t\t\tid = that.resData.horde[i].id;\r\n\t\t\t\t\t\t\tthat.resData.horde[i].count = res['horde_info'][id]['count']\r\n\t\t\t\t\t\t\t//this.$set(this.res_data.list,iii,this.res_data.list[iii])\r\n\t\t\t\t\t\t\t//console.log(that.resData.horde[i].count)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthat.userList = res.list\r\n\t\t\t\t\t\tthat.distance();\r\n\r\n\t\t\t\t\t\t//活动开始时间5分钟内禁止捕猎\r\n\t\t\t\t\t\tthat.duration_user.value = res.duration_user\r\n\t\t\t\t\t\tthat.duration_user.values = that.second(res.duration_user)\r\n\r\n\r\n\t\t\t\t\t\tthat.duration = that.second(res.duration)\r\n\t\t\t\t\t\tthat.theme_type = res.type.value\r\n\t\t\t\t\t\tif (that.theme_type != 2) { //活动已结束\r\n\t\t\t\t\t\t\t//关闭监听\r\n\t\t\t\t\t\t\tuni.stopLocationUpdate()\r\n\t\t\t\t\t\t\tuni.offLocationChange()\r\n\t\t\t\t\t\t\tthat.$common.recordingTimer(false)\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: res.type.tips,\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tsuccess: (e) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(e) //confirm\r\n\t\t\t\t\t\t\t\t\tif (e.confirm == true) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$common.goback()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检测身份转换\r\n\t\t\t\t\t\tif (that.device_locationData.theme_user != undefined && that.device_locationData.theme_user\r\n\t\t\t\t\t\t\t.horde_id != res.theme_user.horde_id) {\r\n\t\t\t\t\t\t\tthat.qrcode.show = false; //隐藏二维码\r\n\t\t\t\t\t\t\tthat.$common.toast(\"当前你的身份阵营已转换啦\")\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.device_locationData = res\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\r\n\t\t\t\t\t}, false, )\r\n\t\t\t},\r\n\t\t\t//开始监听实时地理位置信息变化事件，小程序进入前后台时均接收实时地理位置信息。\r\n\t\t\tstartLocationUpdateBackground() {\r\n\t\t\t\tuni.startLocationUpdateBackground({\r\n\t\t\t\t\ttype: 'gcj02', //指定坐标系类型，可以是 wgs84 或 gcj02\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t//console.log(\"startLocationUpdateBackground:\",res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t//console.log(\"startLocationUpdateBackground:\",res)\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//开启小程序进入前台时接收位置消息。\r\n\t\t\tstartLocationUpdate() {\r\n\t\t\t\tuni.startLocationUpdate({\r\n\t\t\t\t\ttype: 'gcj02', //指定坐标系类型，可以是 wgs84 或 gcj02\r\n\t\t\t\t\tneedFullAccuracy: true, //针对 iOS14/Android12 及以上的新特性，其他情况本参数忽略。默认情况宿主是精确定位就返回精确定位信息。传入 true 会强制使用精确定位信息，iOS14/Android12 及以上如果没有精确定位权限，会弹出精确定位授权弹框。\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t//console.log(\"startLocationUpdate:\",res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t//console.log(\"startLocationUpdate:\",res)\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//移动用户坐标点\r\n\t\t\tmoveLocation(markerId, res) {\r\n\t\t\t\t//console.log(\"moveLocation\",markerId)\r\n\t\t\t\tthis.mapContext.translateMarker({\r\n\t\t\t\t\tmarkerId: markerId,\r\n\t\t\t\t\tdestination: {\r\n\t\t\t\t\t\tlatitude: res.latitude,\r\n\t\t\t\t\t\tlongitude: res.longitude\r\n\t\t\t\t\t}, //指定 marker 移动到的目标点\r\n\t\t\t\t\tautoRotate: false, //移动过程中是否自动旋转 marker\r\n\t\t\t\t\trotate: 0, //marker 的旋转角度\r\n\t\t\t\t\tfail: function(e) {\r\n\t\t\t\t\t\t//console.log('移动用户坐标点失败',e)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(e) {\r\n\t\t\t\t\t\t//console.log('移动用户坐标点成功',markerId,res,e)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tupdated() {\r\n\t\t\t\tvar that = this\r\n\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 查找userid是否已被创建 */\r\n\t\t\tcheckUserCreate(uid) {\r\n\t\t\t\tlet markers_tmp = this.markers_user\r\n\t\t\t\tfor (var i = 0; i < markers_tmp.length; i++) {\r\n\t\t\t\t\tif (markers_tmp[i].id == uid) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * m秒格式化时分秒 */\r\n\t\t\tsecond(duration) {\r\n\r\n\t\t\t\tvar theTime = parseInt(duration); // 秒\r\n\t\t\t\tvar middle = 0; // 分\r\n\t\t\t\tvar hour = 0; // 小时\r\n\r\n\t\t\t\tif (theTime >= 60) {\r\n\t\t\t\t\tmiddle = parseInt(theTime / 60);\r\n\t\t\t\t\ttheTime = parseInt(theTime % 60);\r\n\t\t\t\t\tif (middle >= 60) {\r\n\t\t\t\t\t\thour = parseInt(middle / 60);\r\n\t\t\t\t\t\tmiddle = parseInt(middle % 60);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar result = \"\" + parseInt(theTime) //+\"秒\";\r\n\t\t\t\tresult = result.length == 1 ? '0' + result : result; //补位\r\n\r\n\t\t\t\tif (middle > 0) {\r\n\t\t\t\t\tmiddle = parseInt(middle)\r\n\t\t\t\t\tmiddle = middle.length == 1 ? '0' + middle : middle; //补位\r\n\t\t\t\t\tresult = \"\" + middle + \":\" + result;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = \"00\" + \":\" + result;\r\n\t\t\t\t}\r\n\t\t\t\tif (hour > 0) {\r\n\t\t\t\t\thour = parseInt(hour)\r\n\t\t\t\t\thour = hour.length == 1 ? '0' + hour : hour; //补位\r\n\t\t\t\t\tresult = \"\" + hour + \":\" + result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = \"00\" + \":\" + result;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 计算距离 */\r\n\t\t\tdistance() {\r\n\t\t\t\tvar that = this\r\n\r\n\t\t\t\t// 构建链接\r\n\t\t\t\tvar pam = {}\r\n\t\t\t\tlet markers_tmp = that.markers_user\r\n\t\t\t\t//markers_tmp.push({latitude:21.91438594640249,longitude:110.85250765211777})\r\n\t\t\t\tpam.to = ''\r\n\t\t\t\tfor (var i = 0; i < markers_tmp.length; i++) {\r\n\r\n\t\t\t\t\tpam.to += `${markers_tmp[i].latitude},${markers_tmp[i].longitude}`\r\n\t\t\t\t\tif (i + 1 < markers_tmp.length) {\r\n\t\t\t\t\t\tpam.to = pam.to + ';'\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(pam.to)\r\n\t\t\t\tpam.key = that.resData.map //\"VPSBZ-SY6CU-YE5VL-GRWJO-G3CZ3-M4FWP\"\r\n\t\t\t\tpam.from = `${that.location_my.latitude},${that.location_my.longitude}`\r\n\t\t\t\tpam.mode = \"walking\"\r\n\r\n\r\n\t\t\t\tvar url = 'https://apis.map.qq.com/ws/distance/v1/matrix' + that.$common.converToUrl(pam)\r\n\t\t\t\t//console.log(url)\r\n\r\n\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t//console.log(res)\r\n\t\t\t\t\t\tif (res.data.result == undefined) {\r\n\t\t\t\t\t\t\t//console.log('res.result == undefined')\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//console.log('计算距离',res)\r\n\t\t\t\t\t\tvar tmp_risk = false;\r\n\t\t\t\t\t\t//动态刷新距离\r\n\t\t\t\t\t\tfor (var i = 0; i < markers_tmp.length; i++) {\r\n\t\t\t\t\t\t\tif (markers_tmp[i].id != that.resData.user.theme_user.user_id) { //把自己给排除掉\r\n\t\t\t\t\t\t\t\tmarkers_tmp[i].distance = res.data.result.rows[0].elements[i].distance\r\n\r\n\t\t\t\t\t\t\t\tmarkers_tmp[i].callout.content =\r\n\t\t\t\t\t\t\t\t\t`${markers_tmp[i].messages}\\n距你${markers_tmp[i].distance}米\\n${markers_tmp[i].online}`\r\n\r\n\t\t\t\t\t\t\t\t// 距离小于100米的时候发出警报\r\n\t\t\t\t\t\t\t\tif (markers_tmp[i].distance < 100) {\r\n\t\t\t\t\t\t\t\t\ttmp_risk = true;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tmarkers_tmp[i].callout.content = `${markers_tmp[i].messages}`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthat.risk.risk = tmp_risk;\r\n\r\n\t\t\t\t\t\tthat.markers_user = markers_tmp\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 判断点击的点位是否在polygon之内 */\r\n\r\n\t\t\tisPtInPoly(aLat, aLon, pointList) {\r\n\t\t\t\t/* \r\n\t\t\t\t:param aLat: double 纬度 \r\n\t\t\t\t:param aLon: double 经度 \r\n\t\t\t\t:param pointList: list [{latitude: 22.22, longitude: 113.113}...] 多边形点的顺序需根据顺时针或逆时针，不能乱 \r\n\t\t\t\t*/\r\n\t\t\t\tlet iSum = 0\r\n\t\t\t\tlet iCount = pointList.length\r\n\r\n\t\t\t\tif (iCount < 3) {\r\n\t\t\t\t\tconsole.log('退出检测')\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('进入检测')\r\n\t\t\t\tfor (let i = 0; i < iCount; i++) {\r\n\t\t\t\t\tlet pLat1 = pointList[i].latitude\r\n\t\t\t\t\tlet pLon1 = pointList[i].longitude\r\n\t\t\t\t\tlet pLat2 = 0,\r\n\t\t\t\t\t\tpLon2 = 0;\r\n\t\t\t\t\tif (i == iCount - 1) {\r\n\t\t\t\t\t\tpLat2 = pointList[0].latitude\r\n\t\t\t\t\t\tpLon2 = pointList[0].longitude\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpLat2 = pointList[i + 1].latitude\r\n\t\t\t\t\t\tpLon2 = pointList[i + 1].longitude\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (((aLat >= pLat1) && (aLat < pLat2)) || ((aLat >= pLat2) && (aLat < pLat1))) {\r\n\t\t\t\t\t\tif (Math.abs(pLat1 - pLat2) > 0) {\r\n\t\t\t\t\t\t\tlet pLon = pLon1 - ((pLon1 - pLon2) * (pLat1 - aLat)) / (pLat1 - pLat2);\r\n\t\t\t\t\t\t\tif (pLon < aLon) {\r\n\t\t\t\t\t\t\t\tiSum += 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (iSum % 2 != 0) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 创建用户标记点 */\r\n\t\t\tcreateMarkersUser(location, user_id, username, avatar, horde_id) {\r\n\t\t\t\tconsole.log(\"createMarkersUser\", user_id)\r\n\t\t\t\tvar that = this\r\n\t\t\t\tvar isuid = user_id != that.resData.user.theme_user.user_id ? false : true;\r\n\t\t\t\tlet markers_tmp = this.markers_user\r\n\t\t\t\tlet markerItem = {\r\n\t\t\t\t\tid: parseInt(user_id),\r\n\t\t\t\t\tlatitude: null,\r\n\t\t\t\t\tlongitude: null,\r\n\t\t\t\t\ticonPath: avatar,\r\n\t\t\t\t\twidth: '34px',\r\n\t\t\t\t\theight: '34px',\r\n\t\t\t\t\trotate: 0,\r\n\t\t\t\t\talpha: 1,\r\n\t\t\t\t\tzIndex: 4,\r\n\t\t\t\t\tdistance: 0, //距离自己多少米\r\n\t\t\t\t\tnickname: username, //用户名\r\n\t\t\t\t\tmessages: '', //消息\r\n\t\t\t\t\thorde_id: horde_id,\r\n\t\t\t\t\tonline: '', //(在线)\r\n\t\t\t\t\tcallout: {\r\n\t\t\t\t\t\tcolor: isuid == false ? '#000' : '#01bb75',\r\n\t\t\t\t\t\tcontent: isuid == false ? `${username}\\n距你0m` : `${username}`,\r\n\t\t\t\t\t\tdisplay: 'ALWAYS', //'BYCLICK':点击显示; 'ALWAYS':常显\r\n\t\t\t\t\t\tborderRadius: 10,\r\n\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t\tmarkerItem.latitude = location.latitude;\r\n\t\t\t\tmarkerItem.longitude = location.longitude;\r\n\t\t\t\tmarkers_tmp.push(markerItem) //加入用户标记点数组\r\n\t\t\t\tthis.markers_user = markers_tmp\r\n\t\t\t\tthis.markers.push(markerItem) //加入公共坐标数组\r\n\r\n\t\t\t},\r\n\t\t\t// 绘制多边形围栏\r\n\t\t\tcreatPolygons(markers) {\r\n\t\t\t\tif (markers.length < 3) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tlet polygons = this.polygons;\r\n\t\t\t\tlet markers_tmp = this.coordinateSort(markers)\r\n\t\t\t\tlet newArray = [];\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tfillColor: \"#3336fc2b\",\r\n\t\t\t\t\tstrokeColor: \"#ff383b\",\r\n\t\t\t\t\tstrokeWidth: 2,\r\n\t\t\t\t\tzIndex: 3\r\n\t\t\t\t}\r\n\t\t\t\tfor (let j = 0; j < markers_tmp.length; j++) {\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tlatitude: markers_tmp[j].latitude,\r\n\t\t\t\t\t\tlongitude: markers_tmp[j].longitude\r\n\t\t\t\t\t};\r\n\t\t\t\t\tnewArray.push(obj);\r\n\t\t\t\t}\r\n\t\t\t\tpolygons[0] = {};\r\n\t\t\t\tpolygons[0].points = newArray;\r\n\t\t\t\tnewArray = Object.assign(polygons[0], params);\r\n\t\t\t\tthis.polygons[0] = newArray\r\n\t\t\t\tthis.$emit(\"getPointsArr\", newArray)\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 使用reduce获取中心（平均值）\r\n\t\t\tcoordinateSort(points) {\r\n\t\t\t\tconst center = points.reduce((acc, {\r\n\t\t\t\t\tlatitude,\r\n\t\t\t\t\tlongitude\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tacc.latitude += latitude / points.length;\r\n\t\t\t\t\tacc.longitude += longitude / points.length;\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t}, {\r\n\t\t\t\t\tlatitude: 0,\r\n\t\t\t\t\tlongitude: 0\r\n\t\t\t\t});\r\n\t\t\t\t// 使用tan（angle）=y/x将角度特性添加到每个点\r\n\t\t\t\tconst angles = points.map(({\r\n\t\t\t\t\tlatitude,\r\n\t\t\t\t\tlongitude\r\n\t\t\t\t}) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlatitude,\r\n\t\t\t\t\t\tlongitude,\r\n\t\t\t\t\t\tangle: Math.atan2(longitude - center.longitude, latitude - center.latitude) * 180 / Math.PI\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\t// 按角度排序\r\n\t\t\t\tconst pointsSorted = angles.sort((a, b) => a.angle - b.angle);\r\n\t\t\t\treturn pointsSorted\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n\t@import \"@/static/css/leaderboard.css\";\r\n\r\n\t.bcak {\r\n\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tposition: fixed;\r\n\t\tleft: 30rpx;\r\n\t}\r\n\r\n\t.active-num {\r\n\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\twidth: 500rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder-radius: 50rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tposition: fixed;\r\n\t\ttop: 150rpx;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tpadding: 0 40rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tcolor: #fff;\r\n\r\n\t\t.active-num-on {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\r\n\t\t.active-num-on::before {\r\n\t\t\tdisplay: block;\r\n\t\t\tcontent: '';\r\n\t\t\twidth: 20rpx;\r\n\t\t\theight: 20rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tbackground-color: #01bb75;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: -25rpx;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t}\r\n\r\n\t\t.active-num-now {\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t.active-num-out {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\r\n\t\t.active-num-out::before {\r\n\t\t\tdisplay: block;\r\n\t\t\tcontent: '';\r\n\t\t\twidth: 20rpx;\r\n\t\t\theight: 20rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tbackground-color: #FF5753;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: -25rpx;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t}\r\n\t}\r\n\r\n\t.right-box {\r\n\t\tposition: fixed;\r\n\t\tright: 40rpx;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-65%);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\theight: 650rpx;\r\n\r\n\t\t.right-box-item {\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\theight: 80rpx;\r\n\t\t\twidth: 80rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.right-box-item-icon {\r\n\t\t\t\twidth: 40rpx;\r\n\t\t\t\theight: 40rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.right-box-item-title {\r\n\t\t\t\ttransform: scale(0.7);\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.active-box {\r\n\t\tposition: fixed;\r\n\t\tbackground-color: #fff;\r\n\t\tbottom: 0;\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 30rpx 30rpx 0 0;\r\n\t\tpadding: 0 30rpx 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t.bottom-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t.qr-box {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tcolor: #000;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\r\n\t\t\t\t.text {\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.qrcode {\r\n\t\t\t\t\twidth: 70rpx;\r\n\t\t\t\t\theight: 70rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.user-info {\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t.active-box-bottom {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-top: 30rpx;\r\n\r\n\t\t\t.active-box-btn {\r\n\t\t\t\tbackground: linear-gradient(0deg, #76beff, #1d94ff);\r\n\t\t\t\twidth: 200rpx;\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 80rpx;\r\n\t\t\t\tborder-radius: 80rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\t\t\t.active-box-time {\r\n\t\t\t\tmargin-left: 50rpx;\r\n\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\t.active-box-time-top {\r\n\t\t\t\t\tcolor: #000;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.active-box-time-bottom {\r\n\t\t\t\t\tcolor: #999;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.global-msg {\r\n\t\tcolor: #ffffff;\r\n\t\tposition: absolute;\r\n\t\twidth: calc(100% - 10px);\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 28rpx;\r\n\t\tbottom: 0px;\r\n\t\tpadding: 10rpx;\r\n\t\t/* background-color: #fff; */\r\n\t\tbackground: #0000008c;\r\n\t}\r\n\r\n\t.chat {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 75%;\r\n\t\tbottom: 0px;\r\n\t\tz-index: 111;\r\n\t\t// box-shadow: 0px -3px 2px 1px #00000078;\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tvertical-align: top;\r\n\t\t}\r\n\r\n\t\t.li {\r\n\t\t\tlist-style: none;\r\n\t\t}\r\n\r\n\t\t.time {\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tmargin: 20rpx 0;\r\n\t\t\tfont-weight: 500;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tbackground: #000000bf;\r\n\t\t\toverflow: scroll;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\theight: calc(90% - 20px);\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 10rpx 0rpx;\r\n\t\t\tborder-top-left-radius: 20rpx;\r\n\t\t\tborder-top-right-radius: 20rpx;\r\n\t\t}\r\n\r\n\t\t.nickname {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: -36rpx;\r\n\t\t\tcolor: #ccc;\r\n\t\t\tleft: 0px;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\theight: 36rpx;\r\n\t\t}\r\n\r\n\t\tspan {\r\n\t\t\tword-wrap: break-word;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tletter-spacing: 2rpx;\r\n\t\t\tjustify-content: center;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\twidth: -webkit-fill-available;\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-me,\r\n\t\t.pop__chat-msg-me2 {\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-msg {\r\n\t\t\tfloat: right;\r\n\t\t\tbackground-color: #4cb4e7;\r\n\t\t\tborder-color: #4cb4e7;\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-msg {\r\n\t\t\tbackground-color: #4cb4e7;\r\n\t\t\tborder-color: #4cb4e7;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-width: 0.02rem;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tfloat: left;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tmargin: 0 16rpx;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tposition: relative;\r\n\t\t\tcolor: #fff;\r\n\t\t\tmin-width: 120rpx;\r\n\t\t\tmax-width: calc(100% - 182rpx);\r\n\t\t\twidth: auto;\r\n\t\t\tmargin-left: auto;\r\n\t\t}\r\n\r\n\r\n\t\t.pop__chat-msg-msg2 {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-color: #fff;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-width: 2rpx;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tfloat: left;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tmargin: 0 16rpx;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tposition: relative;\r\n\t\t\tjustify-content: center;\r\n\t\t\tdisplay: flex;\r\n\t\t\tmin-width: 200rpx;\r\n\t\t\tmax-width: calc(100% - 182rpx);\r\n\t\t\twidth: auto;\r\n\t\t}\r\n\r\n\r\n\t\t.pop__chat-msg-avatar {\r\n\t\t\tdisplay: block;\r\n\t\t\toverflow: hidden;\r\n\t\t\theight: 70rpx;\r\n\t\t\twidth: 70rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t}\r\n\r\n\t\t.pop__clearfix:after {\r\n\t\t\tcontent: \"\";\r\n\t\t\tclear: both;\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-msg:before {\r\n\t\t\tbackground: inherit;\r\n\t\t\tborder-color: inherit;\r\n\t\t\tright: -12rpx;\r\n\t\t\ttransform: translate(0, -50%) rotate(45deg);\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-msg:before {\r\n\t\t\tcontent: '';\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-width: .01rem .01rem 0 0;\r\n\t\t\theight: 20rpx;\r\n\t\t\twidth: 20rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 20rpx;\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-msg2:before {\r\n\t\t\tbackground: inherit;\r\n\t\t\tborder-color: inherit;\r\n\t\t\tleft: -12rpx;\r\n\t\t\ttransform: translate(0, -50%) rotate(45deg);\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-msg2:before {\r\n\t\t\tcontent: '';\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-width: .01rem .01rem 0 0;\r\n\t\t\theight: 20rpx;\r\n\t\t\twidth: 20rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 20rpx;\r\n\t\t}\r\n\r\n\t\t.pop__chat-msg-msg1:before {\r\n\t\t\tbackground: inherit;\r\n\t\t\tborder-color: inherit;\r\n\t\t\tright: -20rpx;\r\n\t\t\ttransform: translate(0, -50%) rotate(45deg);\r\n\t\t}\r\n\r\n\t\t.Bottom {\r\n\t\t\twidth: calc(100% - 60rpx);\r\n\t\t\tposition: absolute;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tpadding: 10rpx 30rpx 30rpx 30rpx;\r\n\t\t\theight: 10%;\r\n\t\t\tbackground-color: #000000cf;\r\n\t\t}\r\n\r\n\t\t.Bottom .but {\r\n\t\t\t// width: 40px;\r\n\t\t\theight: 80rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-self: center;\r\n\t\t\ttext-align: center;\r\n\t\t\t// border-radius: 50%;\r\n\t\t\tborder: none;\r\n\t\t\toutline: none;\r\n\t\t\tflex: 1;\r\n\t\t}\r\n\r\n\t\t/* .expression {\r\n\t\tbackground-image: url(../Image/b.png);\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbackground-repeat: no-repeat;\r\n\t} */\r\n\r\n\r\n\t\t.sendout {\r\n\t\t\t// width: 1rem !important;\r\n\t\t\t// height: 0.6rem !important;\r\n\t\t\tmin-width: 100rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tbackground: #0BA198;\r\n\t\t\tcolor: #fff;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: center;\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\r\n\t\t.Bottom input {\r\n\t\t\twidth: 63%;\r\n\t\t\theight: calc(100% - 20rpx);\r\n\t\t\tline-height: calc(100% - 20rpx);\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-self: center;\r\n\t\t\tborder: none;\r\n\t\t\tborder-radius: 0.1rem;\r\n\t\t\toutline: none;\r\n\t\t\tfont-size: 0.32rem;\r\n\t\t\tpadding-left: 0.1rem;\r\n\t\t\tword-wrap: break-word;\r\n\t\t}\r\n\r\n\t\t.Bottom textarea {\r\n\t\t\twidth: calc(100% - 200rpx);\r\n\t\t\theight: 60rpx;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-self: center;\r\n\t\t\tborder: none;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\toutline: none;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tword-wrap: break-word;\r\n\t\t\tresize: none;\r\n\t\t\tbackground-color: #fff;\r\n\t\t}\r\n\r\n\t\t.Press {\r\n\t\t\twidth: 65% !important;\r\n\t\t\theight: 0.76rem !important;\r\n\t\t\tborder-radius: 0.1rem !important;\r\n\t\t\tbackground: #fff !important;\r\n\t\t\tpadding: 0.16rem 1.75rem !important;\r\n\t\t\tfont-size: 0.32rem !important;\r\n\t\t\ttext-align: center !important;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tmargin: 0 !important;\r\n\t\t}\r\n\r\n\t\t.Press:active {\r\n\t\t\tbackground: #EBEBEB !important;\r\n\t\t}\r\n\r\n\t\t.state {\r\n\t\t\theight: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\r\n\t\t.express {\r\n\t\t\ttransition: all 2s;\r\n\t\t\theight: 500rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tpadding: 0.2rem 0.1rem 0;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\toverflow: scroll;\r\n\t\t}\r\n\t}\r\n\r\n\t.duration {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tflex-direction: column;\r\n\t\tposition: absolute;\r\n\t\t/* left: 5px; */\r\n\t\tbackground-color: #ffffff61;\r\n\t\tpadding: 0px 20rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\t/* border: solid 1px #c1c1c1; */\r\n\t\ttop: 102rpx;\r\n\t\theight: 64rpx;\r\n\t\tcolor: #ff0000;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.effects {\r\n\t\tposition: absolute;\r\n\t\tz-index: 100;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\ttop: 50%;\r\n\r\n\t\t.title {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 40rpx;\r\n\t\t\twidth: 100%;\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 3em;\r\n\t\t\tcolor: #FF5753;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 3.7em;\r\n\t\t\twidth: 100%;\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 1.5em;\r\n\t\t\tcolor: #FF5753;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t}\r\n\r\n\t.mask {\r\n\r\n\t\tposition: absolute;\r\n\t\tz-index: 10;\r\n\t\tbottom: 0px;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: #000000ba;\r\n\t}\r\n\r\n\t@keyframes duration_user-animation {\r\n\t\t0% {\r\n\t\t\tbox-shadow: inset 0px 0px 0px 0px #01bb75;\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\tbox-shadow: inset 0px 0px 30rpx 12rpx #01bb75;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\tbox-shadow: inset 0px 0px 0px 0px #01bb75;\r\n\t\t}\r\n\t}\r\n\r\n\t.duration_user {\r\n\t\tanimation: duration_user-animation 3s 0s linear infinite;\r\n\t}\r\n\r\n\t.ptInPoly {\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t\tposition: absolute;\r\n\t\twidth: 80%;\r\n\t\ttop: 50%;\r\n\t\tbackground-color: #0a0a0ac9;\r\n\t\tleft: 10%;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 10rpx 0rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tflex-direction: column;\r\n\t\tpointer-events: none;\r\n\t\t/* bottom:0px; */\r\n\t\tfont-size: 24rpx;\r\n\t\tanimation: duration-ptinpoly 1s 0s linear infinite;\r\n\t}\r\n\r\n\t@keyframes duration-ptinpoly {\r\n\t\t0% {\r\n\t\t\tbox-shadow: inset 0px 0px 0px 0px #f10101;\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\tbox-shadow: inset 0px 0px 30rpx 12rpx #f10101;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\tbox-shadow: inset 0px 0px 0px 0px #f10101;\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes risk-animation {\r\n\t\t0% {\r\n\t\t\tbox-shadow: inset 0px 0px 0px 0px #f10101;\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\tbox-shadow: inset 0px 0px 30rpx 12rpx #f10101;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\tbox-shadow: inset 0px 0px 0px 0px #f10101;\r\n\t\t}\r\n\t}\r\n\r\n\t.risk {\r\n\t\t// position: absolute;\r\n\t\t// width: 100%;\r\n\t\t// height: 100%;\r\n\t\t// z-index: 100;\r\n\t\t// pointer-events: none;\r\n\t\tanimation: risk-animation 3s 0s linear infinite;\r\n\t}\r\n\r\n\t.qr-img {\r\n\t\twidth: 400rpx;\r\n\t\theight: 400rpx;\r\n\t\tmargin: auto;\r\n\t\tdisplay: flex;\r\n\t\tz-index: 100;\r\n\t\tleft: calc(50% - 200rpx);\r\n\t\ttop: calc(50% - 200rpx);\r\n\t\tposition: absolute;\r\n\t}\r\n\r\n\t.box {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t}\r\n\r\n\t.camp {\r\n\t\tborder-radius: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tflex-direction: initial;\r\n\t\tpadding: 20rpx 10rpx;\r\n\t}\r\n\r\n\t.camp .text {\r\n\t\tjustify-content: center;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tfont-size: 40rpx;\r\n\t\tpadding: 4rpx;\r\n\t}\r\n\r\n\t.camp .ico {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tflex-direction: column;\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n</style>","import mod from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1739012691543\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}